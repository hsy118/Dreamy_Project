<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.Dreamy.model.mapper.BoardMapper">
	
	<insert id="insertBucket" parameterType="Map">
		insert into Board (uid, board_type, title, content, start_date, end_date, category, image_url)
		values (#{uid}, #{boardType}, #{title}, #{content}, current_date(), #{endDate}, #{category}, #{imageUrl})
	</insert>
	
	<insert id="insertChallenge" parameterType="Map">
		insert into Board (uid, board_type, title, content, start_date, end_date, category, image_url, total_date)
		values (#{uid}, #{boardType}, #{title}, #{content}, #{startDate}, #{endDate}, #{category}, #{imageUrl}, #{totalDate})
	</insert>
	
	<select id="getList" parameterType="map" resultType="com.ssafy.Dreamy.model.BoardDto">
		select pid, uid, board_type as boardType, title, content, written_date as writtenDate,
		start_date as startDate, end_date as endDate, category, image_url as imageUrl, total_date as totalDate from Board
		order by written_date DESC
		limit #{limit},3
	</select>
	
	<select id="getBucketList" resultType="com.ssafy.Dreamy.model.BoardListDto">
		select pid, uid, board_type as boardType, title, content, written_date as writtenDate,
		start_date as startDate, end_date as endDate, category, image_url as imageUrl, total_date as totalDate from Board
		where board_type = 1
		order by written_date DESC
	</select>
	
	<select id="getChallengeList" resultType="com.ssafy.Dreamy.model.BoardListDto">
		select pid, uid, board_type as boardType, title, content, written_date as writtenDate,
		start_date as startDate, end_date as endDate, category, image_url as imageUrl, total_date as totalDate from Board
		where board_type = 2
		order by written_date DESC
	</select>
	 
	<update id="update" parameterType="Map">
		update Board
		set content=#{content}
		where pid=#{pid}
	</update>
	
	<select id="getListTotalSize" resultType="int">
		SELECT count(*) FROM Board;
	</select>
	
</mapper>
